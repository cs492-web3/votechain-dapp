(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3305],{65892:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-candidates",function(){return n(39018)}])},1358:function(t,e,n){"use strict";n.d(e,{Z:function(){return m}});var r=n(85893),a=n(69417),i=n(50657),o=n(31425),s=n(6514),c=n(58951),l=n(37645),u=n(90948);let d=(0,u.ZP)("div")(()=>({marginTop:5})),h=(0,u.ZP)("div")(()=>({marginTop:15,marginBottom:15,fontSize:"18px",color:"#0288d1"})),f=(0,u.ZP)(a.Z)(()=>({marginTop:30,fontSize:"15px",color:"#0288d1",border:"1px solid #0288d1"})),g=t=>{let{NFTCA:e,tokenId:n}=t,a="https://pixxiti.com/ethereum/goerli/nfts/"+e+"/"+n;return(0,r.jsxs)("div",{style:{marginTop:"10px"},children:[(0,r.jsx)(h,{children:"You got NFT as Reward! \uD83C\uDF07"}),(0,r.jsx)(d,{children:"Your NFT contract Address is ".concat(e," ")}),(0,r.jsx)(d,{children:"Your Token ID is ".concat(n)}),(0,r.jsx)(f,{onClick:()=>window.open(a,"_blank"),children:"Check Your NFT"})]})};function m(t){let{open:e,result:n,handleClose:u,onClickClose:d,NFTCA:h,tokenId:f}=t;return(0,r.jsx)("div",{children:(0,r.jsxs)(i.Z,{open:e,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xl",fullWidth:!0,children:[(0,r.jsx)(l.Z,{id:"alert-dialog-title",children:"Transaction Result"}),(0,r.jsxs)(s.Z,{children:[0!=Object.entries(n).length?(0,r.jsxs)(c.Z,{id:"alert-dialog-description",children:[(0,r.jsx)("div",{children:"Transaction Result : ".concat(n.status)}),(0,r.jsx)("div",{children:n.message})]}):(0,r.jsx)(c.Z,{id:"alert-dialog-description",children:"Transaction ongoing"}),"success"==n.status&&h&&f&&(0,r.jsx)(g,{NFTCA:h,tokenId:f})]}),(0,r.jsx)(o.Z,{children:(0,r.jsx)(a.Z,{onClick:d,children:"CLOSE"})})]})})}},39018:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return F}});var r=n(85893),a=n(67294),i=n(7297),o=n(90948),s=n(89683),c=n(15861),l=n(69417);function u(){let t=(0,i.Z)(["\n  margin-right: 20px;\n  & label.Mui-focused {\n    color: #1976d2;\n  }\n  & .MuiOutlinedInput-root {\n    fieldset {\n      border-color: #1976d2;\n    }\n  }\n"]);return u=function(){return t},t}function d(){let t=(0,i.Z)(["\n  variant: h1;\n  color: white;\n  font-size: 20px;\n  margin-bottom: 15px;\n"]);return d=function(){return t},t}function h(){let t=(0,i.Z)(["\n  variant: h1;\n  color: #cce8f4;\n  font-size: 25px;\n  margin-bottom: 20px;\n  margin-top: 20px;\n"]);return h=function(){return t},t}function f(){let t=(0,i.Z)(["\n  color: white;\n  font-size: 15px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n"]);return f=function(){return t},t}function g(){let t=(0,i.Z)(["\n  color: grey;\n  font-size: 15px;\n  margin: 10px;\n"]);return g=function(){return t},t}function m(){let t=(0,i.Z)(["\n  border: 1px solid #42a5f5;\n  background-color: rgba(25, 118, 210, 0);\n  border-radius: 30px;\n  padding: 15px;\n  color: white;\n"]);return m=function(){return t},t}let w=(0,o.ZP)("div")(()=>({marginTop:40,marginLeft:"10px",marginRight:"10px",height:"100%"}));(0,o.ZP)("div")(()=>({display:"flex",flexDirection:"column"}));let p=(0,o.ZP)("div")(()=>({display:"flex",flexDirection:"row"})),x=(0,o.ZP)("div")(()=>({display:"flex",flexDirection:"column",border:"1px solid rgba(255,255,255, 0.3)",padding:"15px",borderRadius:10})),y=(0,o.ZP)("div")(()=>({border:"1px solid #fbc02d",backgroundColor:"rgba(251, 192, 45, 0.3)",color:"white",padding:10,margin:10,borderRadius:20})),C=(0,o.ZP)("div")(()=>({marginTop:20})),Z=(0,o.ZP)(s.Z)(u()),b=(0,o.ZP)(c.Z)(d()),j=(0,o.ZP)(c.Z)(h()),v=(0,o.ZP)(c.Z)(f()),T=(0,o.ZP)(c.Z)(g()),S=(0,o.ZP)(l.Z)(m());var N=n(62140),k=n(4480),P=n(46101),R=n(1358),A=n(11163);let D=()=>{let t=(0,A.useRouter)(),[e,n]=(0,a.useState)(0),[i,o]=(0,a.useState)([]),[s,c]=(0,a.useState)(""),[l,u]=(0,a.useState)(""),[d,h]=(0,a.useState)({}),[f,g]=(0,a.useState)(!1),[m,D]=(0,a.useState)(""),F=(0,k.useRecoilValue)(P.c),[I,E]=(0,a.useState)(""),[$,_]=(0,a.useState)(""),[q,V]=(0,a.useState)(0);(0,a.useEffect)(()=>{var e,n;let r=null!==(n=null===(e=t.query.address)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",a=new URLSearchParams({module:"contract",action:"getabi",address:r,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),i="".concat("https://api-goerli.etherscan.io/api","?").concat(a);E(r);let o=async()=>{let e=await fetch(i),n=await e.json();if("1"==n.status){let r=JSON.parse(n.result);_(r);let a=await (0,N.yr)(r,t.query.address);1==a?t.push({pathname:"/vote",query:{address:t.query.address,name:t.query.name}}):2==a&&t.push({pathname:"/vote-results",query:{address:t.query.address,name:t.query.name}})}else alert(n.result),t.back()};void 0!=r&&o()},[t.query]),(0,a.useEffect)(()=>{async function t(){let t=JSON.parse(JSON.stringify($)),e=await (0,N.lL)(t,I),n=await (0,N.Uu)(t,I);c(String(Number(e)+1)),u(n)}""!=$&&""!=I&&""!=F&&t()},[$,I,F]);let O=async()=>{if(m in i)alert("It's Already Registered Name");else if(q>=3)alert("You Can Add Maximum 3 Candidates");else{g(!0);let t=await (0,N.wD)($,I,m);h(t)}},Y=()=>{0!=Object.entries(h).length&&(g(!1),t.reload())},B=()=>{g(!1),t.reload()};return(0,a.useEffect)(()=>{async function t(){let t=await (0,N.A5)($,I);o(t)}async function e(){let t=await (0,N.hg)($,I);V(t)}""!=$&&""!=I&&(t(),e())},[$,I]),(0,r.jsxs)(w,{children:[(0,r.jsxs)(j,{children:[t.query.name," "]}),(0,r.jsxs)(b,{children:["It","'","s Candidate Registering Period. Try Adding New Candidates and Get NFT! \uD83C\uDF86"]}),(0,r.jsxs)(x,{children:[(0,r.jsx)(v,{children:" Currently Registed Candidate"}),(0,r.jsxs)(p,{children:[0==i.length&&(0,r.jsx)(T,{children:" NONE"}),i.map((t,e)=>(0,r.jsx)(y,{children:t},e))]})]}),(0,r.jsxs)(C,{children:[(0,r.jsx)(v,{children:" Register Candidates "}),(0,r.jsx)(Z,{id:"outlined-basic",label:"Name",variant:"outlined",value:m,onChange:t=>{D(t.target.value)},inputProps:{style:{color:"white"}},InputLabelProps:{style:{color:"grey"}}}),(0,r.jsx)(S,{onClick:O,children:"Register"})]}),(0,r.jsx)(R.Z,{open:f,handleClose:Y,onClickClose:B,result:d,NFTCA:l,tokenId:s})]})};var F=D},62140:function(t,e,n){"use strict";n.d(e,{A5:function(){return m},BF:function(){return w},Eb:function(){return S},M3:function(){return f},TT:function(){return x},Tx:function(){return l},Uu:function(){return C},Zq:function(){return p},eX:function(){return T},hg:function(){return j},hh:function(){return u},je:function(){return b},kh:function(){return s},lL:function(){return y},o5:function(){return g},s4:function(){return d},sj:function(){return c},w4:function(){return v},wD:function(){return h},yr:function(){return Z}});var r=n(68959),a=n(46101),i=n(43584);let o=(0,r.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL");async function s(t){let e=new URLSearchParams({module:"contract",action:"getabi",address:t,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),n="".concat("https://api-goerli.etherscan.io/api","?").concat(e),r=await fetch(n),a=await r.json();if("1"==a.status){let i=JSON.parse(a.result);return i}}let c=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=r.methods.startVoteSession().encodeABI(),c=await N(n,s,e);return c},l=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=r.methods.endVoteSession().encodeABI(),c=await N(n,s,e);return c},u=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=r.methods.restartVoteSession().encodeABI(),c=await N(n,s,e);return c},d=async(t,e,n)=>{let r=(0,i.$l)(a.c),s=new o.eth.Contract(t,e),c=s.methods.voteAndGetNFT(n).encodeABI(),l=await N(r,c,e);return l},h=async(t,e,n)=>{let r=(0,i.$l)(a.c),s=new o.eth.Contract(t,e),c=s.methods.registerCandidateAndGetNFT(n).encodeABI(),l=await N(r,c,e);return l},f=async(t,e)=>{let n=new o.eth.Contract(t,e),r=await n.methods.getTotalCandidateNum().call();return r},g=async(t,e,n)=>{let r=(0,i.$l)(a.c),s=new o.eth.Contract(t,e),c=await s.methods.getCandidateName(n).call({from:r});return c},m=async(t,e)=>{let n=new o.eth.Contract(t,e),r=await n.methods.getAllCandidateNames().call();return r},w=async(t,e,n)=>{let r=(0,i.$l)(a.c),s=new o.eth.Contract(t,e),c=await s.methods.getCandidateVoteCount(n).call({from:r});return c},p=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=await r.methods.getTotalVoteCount().call({from:n});return s},x=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=await r.methods.getIsAdmin(n).call();return s},y=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=await r.methods.getRecentTokenId(n).call();return console.log(s),s},C=async(t,e)=>{let n=new o.eth.Contract(t,e),r=await n.methods.getNFTTokenCA().call();return r},Z=async(t,e)=>{let n=new o.eth.Contract(t,e),r=await n.methods.getElectionStatus().call();return r},b=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=await r.methods.getHasVoted(n).call();return s},j=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=await r.methods.getRegisterNum(n).call();return s},v=async(t,e)=>{let n=(0,i.$l)(a.c),r=new o.eth.Contract(t,e),s=await r.methods.getTokenIds(n).call();return s},T=async(t,e)=>{let n=new o.eth.Contract(t,e),r=await n.methods.getIsShowResultImm().call();return r},S=async(t,e)=>{(0,i.$l)(a.c);let n=new o.eth.Contract(t,e),r=await n.methods.getDescription().call();return r};async function N(t,e,n){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let r=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:n,from:t,data:e}]});return{status:"success",message:r}}catch(a){return{status:"fail",message:"\uD83D\uDE25 "+a.message}}}},46101:function(t,e,n){"use strict";n.d(e,{c:function(){return a}});var r=n(4480);let a=(0,r.atom)({key:"walletAddress",default:""})},46601:function(){}},function(t){t.O(0,[8543,8959,5378,9683,9774,2888,179],function(){return t(t.s=65892)}),_N_E=t.O()}]);