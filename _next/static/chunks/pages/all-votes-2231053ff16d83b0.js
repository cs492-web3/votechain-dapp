(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8125],{13379:function(t,e,n){"use strict";var a=n(64836);e.Z=void 0;var r=a(n(64938)),i=n(85893);e.Z=(0,r.default)((0,i.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},15861:function(t,e,n){"use strict";n.d(e,{Z:function(){return C}});var a=n(63366),r=n(87462),i=n(67294),o=n(90512),s=n(39707),c=n(94780),u=n(90948),l=n(85845),d=n(98216),p=n(1588),A=n(34867);function h(t){return(0,A.ZP)("MuiTypography",t)}(0,p.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=n(85893);let g=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],y=t=>{let{align:e,gutterBottom:n,noWrap:a,paragraph:r,variant:i,classes:o}=t,s={root:["root",i,"inherit"!==t.align&&`align${(0,d.Z)(e)}`,n&&"gutterBottom",a&&"noWrap",r&&"paragraph"]};return(0,c.Z)(s,h,o)},f=(0,u.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e[`align${(0,d.Z)(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>(0,r.Z)({margin:0},"inherit"===e.variant&&{font:"inherit"},"inherit"!==e.variant&&t.typography[e.variant],"inherit"!==e.align&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),w={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},x=t=>b[t]||t,D=i.forwardRef(function(t,e){let n=(0,l.i)({props:t,name:"MuiTypography"}),i=x(n.color),c=(0,s.Z)((0,r.Z)({},n,{color:i})),{align:u="inherit",className:d,component:p,gutterBottom:A=!1,noWrap:h=!1,paragraph:b=!1,variant:D="body1",variantMapping:C=w}=c,v=(0,a.Z)(c,g),M=(0,r.Z)({},c,{align:u,color:i,className:d,component:p,gutterBottom:A,noWrap:h,paragraph:b,variant:D,variantMapping:C}),T=p||(b?"p":C[D]||w[D])||"span",j=y(M);return(0,m.jsx)(f,(0,r.Z)({as:T,ref:e,ownerState:M,className:(0,o.Z)(j.root,d)},v))});var C=D},42990:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/all-votes",function(){return n(32972)}])},32972:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return V}});var a=n(85893),r=n(67294),i=n(11163),o=n(7297),s=n(90948),c=n(69417),u=n(15861);function l(){let t=(0,o.Z)(["\n  color: #b2ddef;\n  font-size: 18px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n  text-transform: none;\n"]);return l=function(){return t},t}function d(){let t=(0,o.Z)(["\n  color: white;\n  font-size: 22px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  text-transform: none;\n"]);return d=function(){return t},t}function p(){let t=(0,o.Z)(["\n  border: 1px solid grey;\n  padding: 10px;\n  border-radius: 10px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n"]);return p=function(){return t},t}function A(){let t=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 10px;\n  margin-bottom: 10px;\n"]);return A=function(){return t},t}function h(){let t=(0,o.Z)(["\n  color: white;\n  font-size: 15px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n"]);return h=function(){return t},t}let m=(0,s.ZP)(c.Z)(()=>({display:"flex",flexDirection:"column",border:"1px solid #42a5f5",color:"white",padding:5,margin:10,borderRadius:20})),g=(0,s.ZP)(c.Z)(()=>({display:"flex",flexDirection:"column",border:"1px solid grey",color:"grey",padding:5,margin:10,borderRadius:20})),y=(0,s.ZP)(u.Z)(l()),f=(0,s.ZP)(u.Z)(d()),w=(0,s.ZP)("div")(t=>({borderWidth:1,borderRadius:20,borderColor:t.disabled?"grey":"#1976d2",color:t.disabled?"grey":"#1976d2",fontSize:"18px"}));(0,s.ZP)("div")(p());let b=(0,s.ZP)("div")(A());(0,s.ZP)(u.Z)(h());var x=n(13379),D={src:"https://cs492-web3.github.io/votechain-dapp//_next/static/media/voted.27fe8c54.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAeFBMVEXMAADLAADLAADLAADLAADMAADMAADMAADMAADLAADMAADLAADLAADMAADMAADMAADMAADLAADLAADMAADLAADLAADMAADMAADLAADMAADLAADMAADMAADLAADMAADMAADMAADMAADMAADMAADLAADMAADMAADLAACuR0Y6AAAAKHRSTlMAAAcICQoLDQ4OERETLD4/QEFCQ0NERUlJSktPVV9mamxtbnF1e3yMsnlTGgAAAENJREFUeNoFgAUSgCAQAPfsbhA7EP3/Dx3ITV/NKSRjjLgvRBUS2/Np0OJd70ZHz36Ugqa+3YLkisCuEJkE8euhnTJ+jocD2dUtCiYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},C={src:"https://cs492-web3.github.io/votechain-dapp//_next/static/media/CheckResult.8f63b2fe.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAo0lEQVR42jWPOwrCQBRFbxP8C1HsbFyEYKFRm4iTkShYKFaWCuISDFZ2rsHvOnMyZAYO9555byCRO28T6pMYmNOHENO7fthGErLu/GtTfIBPoSkkprTEoRt4sBSRV+cMIy4CZE/+oUNfkxlpi1dH5EBeyD5s6Xeyx+OxkB2cuJiQZ3jqt6rqtazRF2KrATMkY+kGFYYBbv23+T9JYUMflcNQknJ2V0RkZWPOnQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},v=n(25675),M=n.n(v);let T=t=>{let{data:e}=t;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{disabled:"0"!=e.status,children:"Resistering Candidates"}),(0,a.jsx)(x.Z,{sx:{color:"grey"}}),(0,a.jsx)(w,{disabled:"1"!=e.status,children:"Vote Ongoing"}),(0,a.jsx)(x.Z,{sx:{color:"grey"}}),(0,a.jsx)(w,{disabled:"2"!=e.status,children:"Vote Ended"})]})},j=t=>{let{data:e}=t,n=(0,i.useRouter)(),r=()=>{n.push({pathname:"/vote",query:{address:e.contractAddress,name:e.name}})},o=()=>{n.push({pathname:"/add-candidates",query:{address:e.contractAddress,name:e.name}})},s=()=>{n.push({pathname:"/vote-results",query:{address:e.contractAddress,name:e.name}})};return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:["0"==e.status&&(0,a.jsxs)(m,{onClick:o,children:[(0,a.jsx)(T,{data:e}),(0,a.jsxs)(y,{children:["".concat(e.name)," "]}),(0,a.jsxs)(f,{children:["".concat(e.description)," "]})]}),"1"==e.status&&(e.hasVoted?!e.isShowResultImm&&(0,a.jsxs)(g,{disabled:!0,onClick:r,children:[(0,a.jsx)(T,{data:e}),(0,a.jsx)(M(),{alt:"Voted",layout:"fill",objectFit:"contain",src:D}),(0,a.jsxs)(y,{children:["".concat(e.name)," "]}),(0,a.jsxs)(f,{children:["".concat(e.description)," "]})]}):(0,a.jsxs)(m,{onClick:r,children:[(0,a.jsx)(T,{data:e}),(0,a.jsxs)(y,{children:["".concat(e.name)," "]}),(0,a.jsxs)(f,{children:["".concat(e.description)," "]})]})),("2"==e.status||e.hasVoted&&e.isShowResultImm)&&(0,a.jsxs)(m,{onClick:s,children:[(0,a.jsx)(T,{data:e}),(0,a.jsx)(M(),{alt:"Voted",layout:"fill",objectFit:"contain",src:C}),(0,a.jsxs)(y,{children:["".concat(e.name)," "]}),(0,a.jsxs)(f,{children:["".concat(e.description)," "]})]})]})};function Z(){let t=(0,o.Z)(["\n  variant: h1;\n  align: center;\n  color: white;\n  font-size: 25px;\n  text-align: center;\n  width: 100%;\n  margin-top: 40px;\n  margin-bottom: 40px;\n"]);return Z=function(){return t},t}let R=(0,s.ZP)("div")(()=>({marginLeft:"10px",marginRight:"10px",justifyContent:"center",height:"100%"})),E=(0,s.ZP)("div")(()=>({display:"flex",flexDirection:"column",margin:10})),k=(0,s.ZP)("div")(()=>({height:"180px",marginTop:20,position:"relative"})),B=(0,s.ZP)(u.Z)(Z());var N=n(60226),S=n(62140),L={src:"https://cs492-web3.github.io/votechain-dapp//_next/static/media/banner.01021998.png",height:700,width:7e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAIAAABsYngUAAAAIUlEQVR42mMIiy6KiM4tzstctyS/pKwpKa3SNyjLNzgbAH/dChBUEj0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:1};let I=()=>{let[t,e]=(0,r.useState)([]),[n,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async function(){var t=await (0,N.nD)();e(t=t.filter(t=>!t.isDeleted))})()},[]),(0,r.useEffect)(()=>{async function e(t){let e=t.contractAddress.trim(),n=await (0,S.kh)(e),a=await (0,S.je)(n,e),r=await (0,S.yr)(n,e),o=await (0,S.Eb)(n,e),s=await (0,S.eX)(n,e),c={hasVoted:a,name:t.name,contractAddress:e,status:r,isShowResultImm:Boolean(Number(s)),description:o};i(t=>[...t,c])}i([]),t.map(t=>{e(t)})},[t]),(0,a.jsxs)(R,{children:[(0,a.jsx)(B,{children:"Currently Ongoing Votes \uD83D\uDDF3ï¸ "}),(0,a.jsx)(E,{children:n.map((t,e)=>(0,a.jsx)(j,{data:t},e))}),(0,a.jsx)(k,{children:(0,a.jsx)(M(),{alt:"Nupjuk NFT",layout:"fill",objectFit:"contain",src:L})})]})};var V=I},60226:function(t,e,n){"use strict";n.d(e,{Jy:function(){return u},qq:function(){return d},nD:function(){return l},TT:function(){return c},V3:function(){return p}});var a=n(68959),r=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"addressString","type":"string"}],"name":"addContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"contractInfos","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"contractAddress","type":"string"},{"internalType":"bool","name":"isDeleted","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"contracts","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"deleteContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAllContracts","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"contractAddress","type":"string"},{"internalType":"bool","name":"isDeleted","type":"bool"}],"internalType":"struct admin_contract.ContractInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getIsAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"reopenContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalContractNum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]');let i=(0,a.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL"),o="0x12D1FC33d8aa9b1E4bb1F2e8e2E97EC7efb28F94",s=new i.eth.Contract(r,o),c=async t=>{let e=await s.methods.getIsAdmin(t).call();return e},u=async(t,e,n)=>{let a=s.methods.addContract(e,n).encodeABI(),r=await A(t,a);return r},l=async()=>{let t=await s.methods.getAllContracts().call();return t},d=async(t,e)=>{let n=s.methods.deleteContract(e).encodeABI(),a=await A(t,n);return a},p=async(t,e)=>{let n=s.methods.reopenContract(e).encodeABI(),a=await A(t,n);return a};async function A(t,e){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let n=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:o,from:t,data:e}]});return{status:"success",message:n}}catch(a){return{status:"fail",message:"\uD83D\uDE25 "+a.message}}}},62140:function(t,e,n){"use strict";n.d(e,{A5:function(){return m},BF:function(){return g},Eb:function(){return T},M3:function(){return A},TT:function(){return f},Tx:function(){return u},Uu:function(){return b},Zq:function(){return y},eX:function(){return M},hg:function(){return C},hh:function(){return l},je:function(){return D},kh:function(){return s},lL:function(){return w},o5:function(){return h},s4:function(){return d},sj:function(){return c},w4:function(){return v},wD:function(){return p},yr:function(){return x}});var a=n(68959),r=n(46101),i=n(43584);let o=(0,a.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL");async function s(t){let e=new URLSearchParams({module:"contract",action:"getabi",address:t,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),n="".concat("https://api-goerli.etherscan.io/api","?").concat(e),a=await fetch(n),r=await a.json();if("1"==r.status){let i=JSON.parse(r.result);return i}}let c=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=a.methods.startVoteSession().encodeABI(),c=await j(n,s,e);return c},u=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=a.methods.endVoteSession().encodeABI(),c=await j(n,s,e);return c},l=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=a.methods.restartVoteSession().encodeABI(),c=await j(n,s,e);return c},d=async(t,e,n)=>{let a=(0,i.$l)(r.c),s=new o.eth.Contract(t,e),c=s.methods.voteAndGetNFT(n).encodeABI(),u=await j(a,c,e);return u},p=async(t,e,n)=>{let a=(0,i.$l)(r.c),s=new o.eth.Contract(t,e),c=s.methods.registerCandidateAndGetNFT(n).encodeABI(),u=await j(a,c,e);return u},A=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getTotalCandidateNum().call();return a},h=async(t,e,n)=>{let a=(0,i.$l)(r.c),s=new o.eth.Contract(t,e),c=await s.methods.getCandidateName(n).call({from:a});return c},m=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getAllCandidateNames().call();return a},g=async(t,e,n)=>{let a=(0,i.$l)(r.c),s=new o.eth.Contract(t,e),c=await s.methods.getCandidateVoteCount(n).call({from:a});return c},y=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=await a.methods.getTotalVoteCount().call({from:n});return s},f=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=await a.methods.getIsAdmin(n).call();return s},w=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=await a.methods.getRecentTokenId(n).call();return console.log(s),s},b=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getNFTTokenCA().call();return a},x=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getElectionStatus().call();return a},D=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=await a.methods.getHasVoted(n).call();return s},C=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=await a.methods.getRegisterNum(n).call();return s},v=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),s=await a.methods.getTokenIds(n).call();return s},M=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getIsShowResultImm().call();return a},T=async(t,e)=>{(0,i.$l)(r.c);let n=new o.eth.Contract(t,e),a=await n.methods.getDescription().call();return a};async function j(t,e,n){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let a=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:n,from:t,data:e}]});return{status:"success",message:a}}catch(r){return{status:"fail",message:"\uD83D\uDE25 "+r.message}}}},46101:function(t,e,n){"use strict";n.d(e,{c:function(){return r}});var a=n(4480);let r=(0,a.atom)({key:"walletAddress",default:""})},46601:function(){},7297:function(t,e,n){"use strict";function a(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,{Z:function(){return a}})}},function(t){t.O(0,[8543,8959,5675,9774,2888,179],function(){return t(t.s=42990)}),_N_E=t.O()}]);