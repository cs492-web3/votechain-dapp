(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1786],{96099:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote",function(){return n(50965)}])},71618:function(t,e,n){"use strict";var a=n(85893),r=n(69417),s=n(16829);let i=(0,s.Z)("div")(()=>({marginTop:5})),c=(0,s.Z)("div")(()=>({marginTop:15,marginBottom:15,fontSize:"18px",color:"#0288d1"})),o=(0,s.Z)(r.Z)(()=>({marginTop:30,fontSize:"15px",color:"#0288d1",border:"1px solid #0288d1"})),l=t=>{let{NFTCA:e,tokenId:n}=t,r="https://pixxiti.com/ethereum/goerli/nfts/"+e+"/"+n;return(0,a.jsxs)("div",{style:{marginTop:"10px"},children:[(0,a.jsx)(c,{children:"You got NFT as Reward! \uD83C\uDF07"}),(0,a.jsx)(i,{children:"Your NFT contract Address is ".concat(e," ")}),(0,a.jsx)(i,{children:"Your Token ID is ".concat(n)}),(0,a.jsx)(o,{onClick:()=>window.open(r,"_blank"),children:"Check Your NFT"})]})};e.Z=l},33668:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var a=n(85893);n(67294);var r=n(69417),s=n(50657),i=n(31425),c=n(6514),o=n(58951),l=n(37645),u=n(71618);function d(t){let{open:e,result:n,handleClose:d,onClickClose:h,NFTCA:f,tokenId:w}=t;return(0,a.jsx)("div",{children:(0,a.jsxs)(s.Z,{open:e,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xl",fullWidth:!0,children:[(0,a.jsx)(l.Z,{id:"alert-dialog-title",children:"Transaction Result"}),(0,a.jsxs)(c.Z,{children:[0!=Object.entries(n).length?(0,a.jsxs)(o.Z,{id:"alert-dialog-description",children:[(0,a.jsx)("div",{children:"Transaction Result : ".concat(n.status)}),(0,a.jsx)("div",{children:n.message})]}):(0,a.jsx)(o.Z,{id:"alert-dialog-description",children:"Transaction ongoing"}),"success"==n.status&&f&&w&&(0,a.jsx)(u.Z,{NFTCA:f,tokenId:w})]}),(0,a.jsx)(i.Z,{children:(0,a.jsx)(r.Z,{onClick:h,children:"CLOSE"})})]})})}},37771:function(t,e,n){"use strict";n.d(e,{A5:function(){return m},BF:function(){return g},Eb:function(){return v},M3:function(){return f},TT:function(){return p},Tx:function(){return l},Uu:function(){return x},Zq:function(){return C},eX:function(){return T},hg:function(){return b},hh:function(){return u},je:function(){return S},kh:function(){return c},lL:function(){return y},o5:function(){return w},s4:function(){return d},sj:function(){return o},w4:function(){return j},wD:function(){return h},yr:function(){return N}});var a=n(40624),r=n(73699),s=n(43584);let i=(0,a.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL");async function c(t){let e=new URLSearchParams({module:"contract",action:"getabi",address:t,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),n="".concat("https://api-goerli.etherscan.io/api","?").concat(e),a=await fetch(n),r=await a.json();if("1"==r.status){let s=JSON.parse(r.result);return s}}let o=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=a.methods.startVoteSession().encodeABI(),o=await k(n,c,e);return o},l=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=a.methods.endVoteSession().encodeABI(),o=await k(n,c,e);return o},u=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=a.methods.restartVoteSession().encodeABI(),o=await k(n,c,e);return o},d=async(t,e,n)=>{let a=(0,s.$l)(r.c),c=new i.eth.Contract(t,e),o=c.methods.voteAndGetNFT(n).encodeABI(),l=await k(a,o,e);return l},h=async(t,e,n)=>{let a=(0,s.$l)(r.c),c=new i.eth.Contract(t,e),o=c.methods.registerCandidateAndGetNFT(n).encodeABI(),l=await k(a,o,e);return l},f=async(t,e)=>{let n=new i.eth.Contract(t,e),a=await n.methods.getTotalCandidateNum().call();return a},w=async(t,e,n)=>{let a=(0,s.$l)(r.c),c=new i.eth.Contract(t,e),o=await c.methods.getCandidateName(n).call({from:a});return o},m=async(t,e)=>{let n=new i.eth.Contract(t,e),a=await n.methods.getAllCandidateNames().call();return a},g=async(t,e,n)=>{let a=(0,s.$l)(r.c),c=new i.eth.Contract(t,e),o=await c.methods.getCandidateVoteCount(n).call({from:a});return o},C=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=await a.methods.getTotalVoteCount().call({from:n});return c},p=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=await a.methods.getIsAdmin(n).call();return c},y=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=await a.methods.getRecentTokenId(n).call();return console.log(c),c},x=async(t,e)=>{let n=new i.eth.Contract(t,e),a=await n.methods.getNFTTokenCA().call();return a},N=async(t,e)=>{let n=new i.eth.Contract(t,e),a=await n.methods.getElectionStatus().call();return a},S=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=await a.methods.getHasVoted(n).call();return c},b=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=await a.methods.getRegisterNum(n).call();return c},j=async(t,e)=>{let n=(0,s.$l)(r.c),a=new i.eth.Contract(t,e),c=await a.methods.getTokenIds(n).call();return c},T=async(t,e)=>{let n=new i.eth.Contract(t,e),a=await n.methods.getIsShowResultImm().call();return a},v=async(t,e)=>{(0,s.$l)(r.c);let n=new i.eth.Contract(t,e),a=await n.methods.getDescription().call();return a};async function k(t,e,n){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let a=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:n,from:t,data:e}]});return{status:"success",message:a}}catch(r){return{status:"fail",message:"\uD83D\uDE25 "+r.message}}}},50965:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return x}});var a=n(85893),r=n(67294),s=n(16829),i=n(15861),c=n(69417);let o=(0,s.Z)(i.Z)(()=>({variant:"h2",align:"center",color:"#cce8f4",fontSize:25,margin:20})),l=(0,s.Z)(i.Z)(()=>({variant:"h1",align:"center",color:"white",fontSize:25,marginBottom:20})),u=(0,s.Z)("div")(()=>({height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),d=(0,s.Z)("div")(()=>({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flexWrap:"wrap",width:"70%"})),h=(0,s.Z)("div")(t=>({width:"100%",color:"white",border:"1px solid ",margin:10,textAlign:"center",padding:30,borderRadius:30,backgroundColor:t.selected?"rgba(255, 255, 255, 0.2)":"rgba(25, 118, 210, 0)"})),f=(0,s.Z)(c.Z)(()=>({margin:30,border:"2px solid",borderRadius:50,width:300,height:50}));var w=n(4480),m=n(73699),g=n(37771),C=n(33668),p=n(11163);n(71618);let y=()=>{let t=(0,p.useRouter)(),[e,n]=(0,r.useState)({}),[s,i]=(0,r.useState)(!1),[c,y]=(0,r.useState)(""),[x,N]=(0,r.useState)(""),S=(0,w.useRecoilValue)(m.c),[b,j]=(0,r.useState)(""),[T,v]=(0,r.useState)(""),[k,Z]=(0,r.useState)(0),[F,D]=(0,r.useState)([]),[E,A]=(0,r.useState)([]),[R,I]=(0,r.useState)(""),[O,$]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=t.query.address,n=new URLSearchParams({module:"contract",action:"getabi",address:e,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),a="".concat("https://api-goerli.etherscan.io/api","?").concat(n);y(e);let r=async()=>{let e=await fetch(a),n=await e.json();if("1"==n.status){let r=JSON.parse(n.result);N(r)}else alert(n.result),t.back()};void 0!=e&&r()},[t.query]),(0,r.useEffect)(()=>{async function t(){let t=JSON.parse(JSON.stringify(x)),e=await (0,g.M3)(t,c),n=await (0,g.Eb)(t,c),a=await (0,g.eX)(t,c);isNaN(e)||(Z(Number(e)),I(n),$(Boolean(Number(a))))}""!=x&&""!=c&&t()},[c,x]),(0,r.useEffect)(()=>{async function t(t){let e=JSON.parse(JSON.stringify(x)),n=await (0,g.o5)(e,c,t);D(t=>[...t,n])}if(""!=x&&""!=c)for(let e=0;e<k;e++)t(e)},[k]),(0,r.useEffect)(()=>{async function t(){let t=JSON.parse(JSON.stringify(x)),e=await (0,g.lL)(t,c),n=await (0,g.Uu)(t,c);j(String(Number(e)+1)),v(n)}""!=x&&""!=c&&""!=S&&t()},[x,c,S]);let _=t=>{"0x22c55175979861e95C79543d5028DE8Cf1a57bF8"==c?A([Number(t.target.id)]):Number(t.target.id) in E?A(e=>e.filter(e=>e!=Number(t.target.id))):A(e=>[...e,Number(t.target.id)])},V=async()=>{if(0==E.length)alert("후보자를 선택해주세요");else{let t=JSON.parse(JSON.stringify(x));i(!0);let e=await (0,g.s4)(t,c,E);n(e)}},B=()=>{0!=Object.entries(n).length&&(i(!1),O&&"success"==e.status?t.push({pathname:"/vote-results"}):t.push({pathname:"/all-votes"}))},J=()=>{i(!1),O&&"success"==e.status?t.push({pathname:"/vote-results"}):t.push({pathname:"/all-votes"})};return(0,a.jsxs)(u,{children:[(0,a.jsx)(o,{children:"Let's Vote and Get NFT! \uD83C\uDF0C"}),(0,a.jsx)(l,{children:R}),(0,a.jsx)(d,{children:F.map((t,e)=>(0,a.jsx)(h,{selected:E.includes(e),id:e,onClick:_,children:t},e))}),(0,a.jsx)(f,{onClick:V,children:"투표하기"}),(0,a.jsx)(C.Z,{open:s,result:e,handleClose:B,onClickClose:J,NFTCA:T,tokenId:b})]})};var x=y}},function(t){t.O(0,[8543,8764,624,3864,9774,2888,179],function(){return t(t.s=96099)}),_N_E=t.O()}]);