(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1786],{15861:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var a=n(63366),r=n(87462),i=n(67294),o=n(90512),c=n(39707),s=n(94780),l=n(90948),u=n(85845),h=n(98216),d=n(1588),g=n(34867);function f(t){return(0,g.ZP)("MuiTypography",t)}(0,d.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=n(85893);let w=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],p=t=>{let{align:e,gutterBottom:n,noWrap:a,paragraph:r,variant:i,classes:o}=t,c={root:["root",i,"inherit"!==t.align&&`align${(0,h.Z)(e)}`,n&&"gutterBottom",a&&"noWrap",r&&"paragraph"]};return(0,s.Z)(c,f,o)},y=(0,l.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e[`align${(0,h.Z)(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>(0,r.Z)({margin:0},"inherit"===e.variant&&{font:"inherit"},"inherit"!==e.variant&&t.typography[e.variant],"inherit"!==e.align&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),C={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},S={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},N=t=>S[t]||t,v=i.forwardRef(function(t,e){let n=(0,u.i)({props:t,name:"MuiTypography"}),i=N(n.color),s=(0,c.Z)((0,r.Z)({},n,{color:i})),{align:l="inherit",className:h,component:d,gutterBottom:g=!1,noWrap:f=!1,paragraph:S=!1,variant:v="body1",variantMapping:b=C}=s,x=(0,a.Z)(s,w),Z=(0,r.Z)({},s,{align:l,color:i,className:h,component:d,gutterBottom:g,noWrap:f,paragraph:S,variant:v,variantMapping:b}),B=d||(S?"p":b[v]||C[v])||"span",T=p(Z);return(0,m.jsx)(y,(0,r.Z)({as:B,ref:e,ownerState:Z,className:(0,o.Z)(T.root,h)},x))});var b=v},96043:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote",function(){return n(57730)}])},62140:function(t,e,n){"use strict";n.d(e,{A5:function(){return m},BF:function(){return w},Eb:function(){return B},M3:function(){return g},TT:function(){return y},Tx:function(){return l},Uu:function(){return S},Zq:function(){return p},eX:function(){return Z},hg:function(){return b},hh:function(){return u},je:function(){return v},kh:function(){return c},lL:function(){return C},o5:function(){return f},s4:function(){return h},sj:function(){return s},w4:function(){return x},wD:function(){return d},yr:function(){return N}});var a=n(68959),r=n(46101),i=n(43584);let o=(0,a.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL");async function c(t){let e=new URLSearchParams({module:"contract",action:"getabi",address:t,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),n="".concat("https://api-goerli.etherscan.io/api","?").concat(e),a=await fetch(n),r=await a.json();if("1"==r.status){let i=JSON.parse(r.result);return i}}let s=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=a.methods.startVoteSession().encodeABI(),s=await T(n,c,e);return s},l=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=a.methods.endVoteSession().encodeABI(),s=await T(n,c,e);return s},u=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=a.methods.restartVoteSession().encodeABI(),s=await T(n,c,e);return s},h=async(t,e,n)=>{let a=(0,i.$l)(r.c),c=new o.eth.Contract(t,e),s=c.methods.voteAndGetNFT(n).encodeABI(),l=await T(a,s,e);return l},d=async(t,e,n)=>{let a=(0,i.$l)(r.c),c=new o.eth.Contract(t,e),s=c.methods.registerCandidateAndGetNFT(n).encodeABI(),l=await T(a,s,e);return l},g=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getTotalCandidateNum().call();return a},f=async(t,e,n)=>{let a=(0,i.$l)(r.c),c=new o.eth.Contract(t,e),s=await c.methods.getCandidateName(n).call({from:a});return s},m=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getAllCandidateNames().call();return a},w=async(t,e,n)=>{let a=(0,i.$l)(r.c),c=new o.eth.Contract(t,e),s=await c.methods.getCandidateVoteCount(n).call({from:a});return s},p=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=await a.methods.getTotalVoteCount().call({from:n});return c},y=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=await a.methods.getIsAdmin(n).call();return c},C=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=await a.methods.getRecentTokenId(n).call();return console.log(c),c},S=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getNFTTokenCA().call();return a},N=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getElectionStatus().call();return a},v=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=await a.methods.getHasVoted(n).call();return c},b=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=await a.methods.getRegisterNum(n).call();return c},x=async(t,e)=>{let n=(0,i.$l)(r.c),a=new o.eth.Contract(t,e),c=await a.methods.getTokenIds(n).call();return c},Z=async(t,e)=>{let n=new o.eth.Contract(t,e),a=await n.methods.getIsShowResultImm().call();return a},B=async(t,e)=>{(0,i.$l)(r.c);let n=new o.eth.Contract(t,e),a=await n.methods.getDescription().call();return a};async function T(t,e,n){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let a=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:n,from:t,data:e}]});return{status:"success",message:a}}catch(r){return{status:"fail",message:"\uD83D\uDE25 "+r.message}}}},46101:function(t,e,n){"use strict";n.d(e,{c:function(){return r}});var a=n(4480);let r=(0,a.atom)({key:"walletAddress",default:""})},57730:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return C}});var a=n(85893),r=n(67294),i=n(90948),o=n(15861),c=n(69417);let s=(0,i.ZP)(o.Z)(()=>({variant:"h2",align:"center",color:"#cce8f4",fontSize:25,margin:20})),l=(0,i.ZP)(o.Z)(()=>({variant:"h1",align:"center",color:"white",fontSize:25,marginBottom:20})),u=(0,i.ZP)("div")(()=>({height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),h=(0,i.ZP)("div")(()=>({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flexWrap:"wrap",width:"70%"})),d=(0,i.ZP)("div")(t=>({width:"100%",color:"white",border:"1px solid ",margin:10,textAlign:"center",padding:30,borderRadius:30,backgroundColor:t.selected?"rgba(255, 255, 255, 0.2)":"rgba(25, 118, 210, 0)"})),g=(0,i.ZP)(c.Z)(()=>({margin:30,border:"2px solid",borderRadius:50,width:300,height:50}));var f=n(4480),m=n(46101),w=n(62140),p=n(11163);let y=()=>{let t=(0,p.useRouter)(),[e,n]=(0,r.useState)(),[i,o]=(0,r.useState)(!1),[c,y]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),N=(0,f.useRecoilValue)(m.c),[v,b]=(0,r.useState)(""),[x,Z]=(0,r.useState)(""),[B,T]=(0,r.useState)(0),[k,P]=(0,r.useState)([]),[R,E]=(0,r.useState)([]),[$,A]=(0,r.useState)(""),[D,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{var e,n;let a=null!==(n=null===(e=t.query.address)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",r=new URLSearchParams({module:"contract",action:"getabi",address:a,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),i="".concat("https://api-goerli.etherscan.io/api","?").concat(r);y(a);let o=async()=>{let e=await fetch(i),n=await e.json();if("1"==n.status){let a=JSON.parse(n.result);S(a)}else alert(n.result),t.back()};void 0!=a&&o()},[t.query]),(0,r.useEffect)(()=>{async function t(){let t=JSON.parse(JSON.stringify(C)),e=await (0,w.M3)(t,c),n=await (0,w.Eb)(t,c),a=await (0,w.eX)(t,c);isNaN(e)||(T(Number(e)),A(n),j(Boolean(Number(a))))}""!=C&&""!=c&&t()},[c,C]),(0,r.useEffect)(()=>{async function t(t){let e=JSON.parse(JSON.stringify(C)),n=await (0,w.o5)(e,c,t);P(t=>[...t,n])}if(""!=C&&""!=c)for(let e=0;e<B;e++)t(e)},[B]),(0,r.useEffect)(()=>{async function t(){let t=JSON.parse(JSON.stringify(C)),e=await (0,w.lL)(t,c),n=await (0,w.Uu)(t,c);b(String(Number(e)+1)),Z(n)}""!=C&&""!=c&&""!=N&&t()},[C,c,N]);let F=t=>{"0x22c55175979861e95C79543d5028DE8Cf1a57bF8"==c?E([Number(t.target.id)]):Number(t.target.id) in R?E(e=>e.filter(e=>e!=Number(t.target.id))):E(e=>[...e,Number(t.target.id)])},J=async()=>{if(0==R.length)alert("후보자를 선택해주세요");else{let t=JSON.parse(JSON.stringify(C));o(!0);let e=await (0,w.s4)(t,c,R);n(e)}};return(0,a.jsxs)(u,{children:[(0,a.jsxs)(s,{children:["Let","'","s Vote and Get NFT! \uD83C\uDF0C"]}),(0,a.jsx)(l,{children:$}),(0,a.jsx)(h,{children:k.map((t,e)=>(0,a.jsx)(d,{selected:R.includes(e),id:e+"",onClick:F,children:t},e))}),(0,a.jsx)(g,{onClick:J,children:"투표하기"})]})};var C=y},46601:function(){}},function(t){t.O(0,[8543,8959,9774,2888,179],function(){return t(t.s=96043)}),_N_E=t.O()}]);