(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5442],{32788:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote-results",function(){return n(7832)}])},37771:function(t,e,n){"use strict";n.d(e,{A5:function(){return m},BF:function(){return g},Eb:function(){return x},M3:function(){return h},TT:function(){return C},Tx:function(){return u},Uu:function(){return v},Zq:function(){return y},eX:function(){return $},hg:function(){return S},hh:function(){return l},je:function(){return N},kh:function(){return s},lL:function(){return p},o5:function(){return w},s4:function(){return f},sj:function(){return i},w4:function(){return T},wD:function(){return d},yr:function(){return k}});var a=n(40624),r=n(73699),o=n(43584);let c=(0,a.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL");async function s(t){let e=new URLSearchParams({module:"contract",action:"getabi",address:t,apikey:"34MSPWMQ2JYQ695W8F4B9KVYPF6KF2XVR5"}).toString(),n="".concat("https://api-goerli.etherscan.io/api","?").concat(e),a=await fetch(n),r=await a.json();if("1"==r.status){let o=JSON.parse(r.result);return o}}let i=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=a.methods.startVoteSession().encodeABI(),i=await b(n,s,e);return i},u=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=a.methods.endVoteSession().encodeABI(),i=await b(n,s,e);return i},l=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=a.methods.restartVoteSession().encodeABI(),i=await b(n,s,e);return i},f=async(t,e,n)=>{let a=(0,o.$l)(r.c),s=new c.eth.Contract(t,e),i=s.methods.voteAndGetNFT(n).encodeABI(),u=await b(a,i,e);return u},d=async(t,e,n)=>{let a=(0,o.$l)(r.c),s=new c.eth.Contract(t,e),i=s.methods.registerCandidateAndGetNFT(n).encodeABI(),u=await b(a,i,e);return u},h=async(t,e)=>{let n=new c.eth.Contract(t,e),a=await n.methods.getTotalCandidateNum().call();return a},w=async(t,e,n)=>{let a=(0,o.$l)(r.c),s=new c.eth.Contract(t,e),i=await s.methods.getCandidateName(n).call({from:a});return i},m=async(t,e)=>{let n=new c.eth.Contract(t,e),a=await n.methods.getAllCandidateNames().call();return a},g=async(t,e,n)=>{let a=(0,o.$l)(r.c),s=new c.eth.Contract(t,e),i=await s.methods.getCandidateVoteCount(n).call({from:a});return i},y=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=await a.methods.getTotalVoteCount().call({from:n});return s},C=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=await a.methods.getIsAdmin(n).call();return s},p=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=await a.methods.getRecentTokenId(n).call();return console.log(s),s},v=async(t,e)=>{let n=new c.eth.Contract(t,e),a=await n.methods.getNFTTokenCA().call();return a},k=async(t,e)=>{let n=new c.eth.Contract(t,e),a=await n.methods.getElectionStatus().call();return a},N=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=await a.methods.getHasVoted(n).call();return s},S=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=await a.methods.getRegisterNum(n).call();return s},T=async(t,e)=>{let n=(0,o.$l)(r.c),a=new c.eth.Contract(t,e),s=await a.methods.getTokenIds(n).call();return s},$=async(t,e)=>{let n=new c.eth.Contract(t,e),a=await n.methods.getIsShowResultImm().call();return a},x=async(t,e)=>{(0,o.$l)(r.c);let n=new c.eth.Contract(t,e),a=await n.methods.getDescription().call();return a};async function b(t,e,n){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let a=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:n,from:t,data:e}]});return{status:"success",message:a}}catch(r){return{status:"fail",message:"\uD83D\uDE25 "+r.message}}}},7832:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var a=n(85893),r=n(67294),o=n(16829);let c=(0,o.Z)("Typography")(()=>({variant:"h1",align:"center",color:"white",fontSize:25,margin:20})),s=(0,o.Z)("Typography")(()=>({variant:"h1",align:"center",color:"white",fontSize:30,margin:20})),i=(0,o.Z)("div")(()=>({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"}));var u=n(23148),l=n(26495);u.kL.register(u.uw,u.f$,u.ZL,u.u);let f=t=>{let{voteData:e,voteLabels:n}=t;return(0,a.jsx)("div",{style:{margin:"50px",height:"60vh",width:"80%",alignItems:"center",justifyContent:"center",display:"flex"},children:(0,a.jsx)(l.$Q,{options:{responsive:!0,scales:{x:{grid:{color:"#444"},ticks:{color:"#fff",font:{size:20,color:"#fff"}}},y:{grid:{color:"#444"},min:0,suggestedMin:1,suggestedMax:10,ticks:{color:"#fff",font:{size:18}}}}},data:{labels:n,datasets:[{label:"Vote Result",data:e,backgroundColor:["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"],hoverOffset:4}]}})})};var d=n(11163),h=n(37771);let w=()=>{let t=(0,d.useRouter)(),[e,n]=(0,r.useState)([]),[o,u]=(0,r.useState)(),[l,w]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,C]=(0,r.useState)("");return(0,r.useEffect)(()=>{async function t(){let t=await (0,h.M3)(m,l);isNaN(t)||u(Number(t))}async function e(){let t=await (0,h.Eb)(m,l);C(t)}""!=m&&""!=l&&(t(),e())},[m,l]),(0,r.useEffect)(()=>{(async function(){let e=t.query.address;if(void 0!=e){w(e);let n=await (0,h.kh)(e);g(n)}})()},[t.query]),(0,r.useEffect)(()=>{async function t(t){let e=await (0,h.o5)(m,l,t);var a=0;a=await (0,h.BF)(m,l,t),n(t=>[...t,{name:e,voteCount:a}])}if(""!=m&&""!=l)for(let e=0;e<o;e++)n([]),t(e)},[o]),(0,a.jsxs)(i,{children:[(0,a.jsxs)(s,{children:[" ",y," "]}),(0,a.jsx)(c,{children:" Check Vote Results! "}),(0,a.jsx)(f,{voteData:e.map(t=>t.voteCount),voteLabels:e.map(t=>t.name)})]})};var m=w}},function(t){t.O(0,[8543,2196,8764,624,3853,9774,2888,179],function(){return t(t.s=32788)}),_N_E=t.O()}]);