(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3305],{13047:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-candidates",function(){return n(30262)}])},33668:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var i=n(85893);n(67294);var a=n(83321),u=n(50657),s=n(31425),o=n(6514),r=n(58951),l=n(37645);function d(t){let{open:e,result:n,handleClose:d,onClickClose:p}=t;return(0,i.jsx)("div",{children:(0,i.jsxs)(u.Z,{open:e,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"sm",fullWidth:!0,children:[(0,i.jsx)(l.Z,{id:"alert-dialog-title",children:"Transaction Result"}),(0,i.jsx)(o.Z,{children:0!=Object.entries(n).length?(0,i.jsxs)(r.Z,{id:"alert-dialog-description",children:[(0,i.jsx)("div",{children:"트랜잭션 결과 : ".concat(n.status)}),(0,i.jsx)("div",{children:n.message})]}):(0,i.jsx)(r.Z,{id:"alert-dialog-description",children:"트랜잭션 진행 중"})}),(0,i.jsx)(s.Z,{children:(0,i.jsx)(a.Z,{onClick:p,children:"닫기"})})]})})}},30262:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return E}});var i=n(85893),a=n(67294),u=n(7297),s=n(16829),o=n(67563),r=n(15861),l=n(83321);function d(){let t=(0,u.Z)(["\n  margin-right: 20px;\n  & label.Mui-focused {\n    color: #1976d2;\n  }\n  & .MuiOutlinedInput-root {\n    fieldset {\n      border-color: #1976d2;\n    }\n  }\n"]);return d=function(){return t},t}function p(){let t=(0,u.Z)(["\n  variant: h1;\n  color: white;\n  font-size: 20px;\n  margin-bottom: 10px;\n"]);return p=function(){return t},t}function c(){let t=(0,u.Z)(["\n  color: white;\n  font-size: 15px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n"]);return c=function(){return t},t}function y(){let t=(0,u.Z)(["\n  border: 1px solid #42a5f5;\n  background-color: rgba(25, 118, 210, 0);\n  border-radius: 30px;\n  padding: 15px;\n  color: white;\n"]);return y=function(){return t},t}let m=(0,s.Z)("div")(()=>({marginTop:40,marginLeft:"4rem",marginRight:"4rem",height:"100%"}));(0,s.Z)("div")(()=>({display:"flex",flexDirection:"column"}));let f=(0,s.Z)("div")(()=>({display:"flex",flexDirection:"row"})),b=(0,s.Z)("div")(()=>({border:"1px solid #fbc02d",backgroundColor:"rgba(251, 192, 45, 0.3)",color:"white",padding:10,margin:10,borderRadius:20})),g=(0,s.Z)("div")(()=>({marginTop:20})),T=(0,s.Z)(o.Z)(d()),h=(0,s.Z)(r.Z)(p()),w=(0,s.Z)(r.Z)(c()),v=(0,s.Z)(l.Z)(y());var x=n(89917),C=n(69077),M=n(33668);let Z=()=>{let[t,e]=(0,a.useState)(0),[n,u]=(0,a.useState)([]),[s,o]=(0,a.useState)({}),[r,l]=(0,a.useState)(!1),[d,p]=(0,a.useState)(""),[c,y]=(0,a.useState)("");(0,C.mA)({onConnect(t){let{address:e,connector:n,isReconnected:i}=t;i?y(e):router.reload()}});let Z=async()=>{l(!0);let t=await (0,x.fR)(c,d);console.log(t),o(t)},E=()=>{0!=Object.entries(o).length&&l(!1)},j=()=>{l(!1)};return(0,a.useEffect)(()=>{(async function(){let t=await (0,x.M3)();isNaN(t)||e(Number(t))})()},[]),(0,a.useEffect)(()=>{async function e(t){let e=await (0,x.o5)(c,t);u(t=>[...t,e])}for(let n=0;n<t;n++)u([]),e(n)},[t]),(0,i.jsxs)(m,{children:[(0,i.jsxs)(h,{children:[" ","지금은 후보자 등록 기간입니다! 나의 최애를 등록해보세요"," "]}),(0,i.jsx)(w,{children:" 현재 등록된 후보자"}),(0,i.jsx)(f,{children:n.map((t,e)=>(0,i.jsx)(b,{children:t}))}),(0,i.jsxs)(g,{children:[(0,i.jsx)(w,{children:" 나만의 최애 등록하기 "}),(0,i.jsx)(T,{id:"outlined-basic",label:"최애 이름",variant:"outlined",value:d,onChange:t=>{p(t.target.value)},inputProps:{style:{color:"white"}}}),(0,i.jsx)(v,{onClick:Z,children:"등록하기"})]}),(0,i.jsx)(M.Z,{open:r,handleClose:E,onClickClose:j,result:s})]})};var E=Z},89917:function(t,e,n){"use strict";n.d(e,{l4:function(){return r},Tx:function(){return d},o5:function(){return m},BF:function(){return f},yr:function(){return w},TT:function(){return g},Uu:function(){return h},M$:function(){return T},M3:function(){return y},Zq:function(){return b},fR:function(){return p},sj:function(){return l},s4:function(){return c}});var i=n(1117),a=JSON.parse('[{"inputs":[{"internalType":"address","name":"_NFTTokenCA","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"}],"name":"candRegisteredEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum Election_step2.ElectionStatus","name":"prev","type":"uint8"},{"indexed":false,"internalType":"enum Election_step2.ElectionStatus","name":"end","type":"uint8"}],"name":"statusChangedEvent","type":"event"},{"anonymous":false,"inputs":[],"name":"voteDoneEvent","type":"event"},{"inputs":[],"name":"NFTTokenCA","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"VoteNFT","outputs":[{"internalType":"contract NFTToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidates","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"electionStatus","outputs":[{"internalType":"enum Election_step2.ElectionStatus","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"endRegisterCandSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"endVoteSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"getCandidateName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"getCandidateVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getElectionStatus","outputs":[{"internalType":"enum Election_step2.ElectionStatus","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getHasVoted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getIsAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNFTTokenCA","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalCandidateNum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"registerCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"restartVoteSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startVoteSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalCandidateNum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"candidateId","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"candidateId","type":"uint256"}],"name":"voteAndGetNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"votersToToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]');let u=(0,i.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL"),s="0x03dEbe046471Cb09662D26cE5E29cbCe2d32645e",o=new u.eth.Contract(a,s),r=async t=>{let e=o.methods.endRegisterCandSession().encodeABI(),n=await v(t,e);return n},l=async t=>{let e=o.methods.startVoteSession().encodeABI(),n=await v(t,e);return n},d=async t=>{let e=o.methods.endVoteSession().encodeABI(),n=await v(t,e);return n},p=async(t,e)=>{let n=o.methods.registerCandidate(e).encodeABI(),i=await v(t,n);return i},c=async(t,e)=>{let n=o.methods.voteAndGetNFT(e).encodeABI(),i=await v(t,n);return i},y=async()=>{let t=await o.methods.getTotalCandidateNum().call();return t},m=async(t,e)=>{let n=await o.methods.getCandidateName(e).call({from:t});return n},f=async(t,e)=>{let n=await o.methods.getCandidateVoteCount(e).call({from:t});return n},b=async t=>{let e=await o.methods.getTotalVoteCount().call({from:t});return e},g=async t=>{let e=await o.methods.getIsAdmin(t).call();return e},T=async t=>{let e=await o.methods.getTokenId(t).call();return console.log(e),e},h=async()=>{let t=await o.methods.getNFTTokenCA().call();return console.log(t),t},w=async()=>{let t=await o.methods.getElectionStatus().call();return t};async function v(t,e){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let n=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:s,from:t,data:e}]});return{status:"success",message:n}}catch(i){return{status:"fail",message:"\uD83D\uDE25 "+i.message}}}},89214:function(){},85568:function(){},52361:function(){},94616:function(){}},function(t){t.O(0,[8543,8764,33,2520,4027,3578,9774,2888,179],function(){return t(t.s=13047)}),_N_E=t.O()}]);