(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1786],{96099:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote",function(){return n(50965)}])},33668:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var a=n(85893);n(67294);var i=n(83321),s=n(50657),u=n(31425),o=n(6514),r=n(58951),l=n(37645);function d(t){let{open:e,result:n,handleClose:d,onClickClose:p}=t;return(0,a.jsx)("div",{children:(0,a.jsxs)(s.Z,{open:e,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(l.Z,{id:"alert-dialog-title",children:"Transaction Result"}),(0,a.jsx)(o.Z,{children:0!=Object.entries(n).length?(0,a.jsxs)(r.Z,{id:"alert-dialog-description",children:[(0,a.jsx)("div",{children:"트랜잭션 결과 : ".concat(n.status)}),(0,a.jsx)("div",{children:n.message})]}):(0,a.jsx)(r.Z,{id:"alert-dialog-description",children:"트랜잭션 진행 중"})}),(0,a.jsx)(u.Z,{children:(0,a.jsx)(i.Z,{onClick:p,children:"닫기"})})]})})}},50965:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var a=n(85893),i=n(67294),s=n(16829),u=n(15861),o=n(83321);let r=(0,s.Z)(u.Z)(()=>({variant:"h1",align:"center",color:"white",fontSize:25,margin:20})),l=(0,s.Z)("div")(()=>({height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),d=(0,s.Z)("div")(()=>({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flexWrap:"wrap",width:"70%"})),p=(0,s.Z)("div")(t=>({width:"100%",color:"white",border:"1px solid ",margin:10,textAlign:"center",padding:30,borderRadius:30,backgroundColor:t.selected?"rgba(255, 255, 255, 0.2)":"rgba(25, 118, 210, 0)"})),c=(0,s.Z)(o.Z)(()=>({margin:30,border:"2px solid",borderRadius:50,width:300,height:50}));var y=n(69077),m=n(89917),f=n(33668);let T=()=>{let[t,e]=(0,i.useState)(""),[n,s]=(0,i.useState)(""),[u,o]=(0,i.useState)("");(0,y.mA)({onConnect(t){let{address:n,connector:a,isReconnected:i}=t;i?e(n):router.reload()}});let[T,g]=(0,i.useState)({}),[b,h]=(0,i.useState)(!1),w=()=>{0!=Object.entries(g).length&&h(!1)},v=()=>{h(!1)},[C,x]=(0,i.useState)(0),[M,E]=(0,i.useState)([]);(0,i.useEffect)(()=>{async function e(){let e=await (0,m.M$)(t),n=await (0,m.Uu)();s(e),o(n)}console.log(t),""!=t&&(e(),console.log(u),console.log(n))},[t]),(0,i.useEffect)(()=>{(async function(){let t=await (0,m.M3)();isNaN(t)||x(Number(t))})()},[]),(0,i.useEffect)(()=>{async function e(e){let n=await (0,m.o5)(t,e);E(t=>[...t,n])}for(let n=0;n<C;n++)E([]),e(n)},[C]);let[N,S]=(0,i.useState)(null),j=t=>{S(Number(t.target.id))},k=async()=>{if(null==N)alert("후보자를 선택해주세요");else{h(!0);let e=await (0,m.s4)(t,N);g(e)}};return(0,a.jsxs)(l,{children:[(0,a.jsx)(r,{children:"투표를 해주세요!"}),(0,a.jsx)(d,{children:M.map((t,e)=>(0,a.jsx)(p,{selected:e==N,id:e,onClick:j,children:t}))}),(0,a.jsx)(c,{onClick:k,children:"투표하기"}),(0,a.jsx)(f.Z,{open:b,result:T,handleClose:w,onClickClose:v})]})};var g=T},89917:function(t,e,n){"use strict";n.d(e,{l4:function(){return r},Tx:function(){return d},o5:function(){return m},BF:function(){return f},yr:function(){return w},TT:function(){return g},Uu:function(){return h},M$:function(){return b},M3:function(){return y},Zq:function(){return T},fR:function(){return p},sj:function(){return l},s4:function(){return c}});var a=n(1117),i=JSON.parse('[{"inputs":[{"internalType":"address","name":"_NFTTokenCA","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"}],"name":"candRegisteredEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum Election_step2.ElectionStatus","name":"prev","type":"uint8"},{"indexed":false,"internalType":"enum Election_step2.ElectionStatus","name":"end","type":"uint8"}],"name":"statusChangedEvent","type":"event"},{"anonymous":false,"inputs":[],"name":"voteDoneEvent","type":"event"},{"inputs":[],"name":"NFTTokenCA","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"VoteNFT","outputs":[{"internalType":"contract NFTToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidates","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"electionStatus","outputs":[{"internalType":"enum Election_step2.ElectionStatus","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"endRegisterCandSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"endVoteSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"getCandidateName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"getCandidateVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getElectionStatus","outputs":[{"internalType":"enum Election_step2.ElectionStatus","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getHasVoted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getIsAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNFTTokenCA","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalCandidateNum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"registerCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"restartVoteSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startVoteSession","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalCandidateNum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"candidateId","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"candidateId","type":"uint256"}],"name":"voteAndGetNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"votersToToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]');let s=(0,a.gL)("wss://eth-goerli.g.alchemy.com/v2/tzC7BEXGGRYsQDD6Qw8XkCYRNx3Ve4EL"),u="0x03dEbe046471Cb09662D26cE5E29cbCe2d32645e",o=new s.eth.Contract(i,u),r=async t=>{let e=o.methods.endRegisterCandSession().encodeABI(),n=await v(t,e);return n},l=async t=>{let e=o.methods.startVoteSession().encodeABI(),n=await v(t,e);return n},d=async t=>{let e=o.methods.endVoteSession().encodeABI(),n=await v(t,e);return n},p=async(t,e)=>{let n=o.methods.registerCandidate(e).encodeABI(),a=await v(t,n);return a},c=async(t,e)=>{let n=o.methods.voteAndGetNFT(e).encodeABI(),a=await v(t,n);return a},y=async()=>{let t=await o.methods.getTotalCandidateNum().call();return t},m=async(t,e)=>{let n=await o.methods.getCandidateName(e).call({from:t});return n},f=async(t,e)=>{let n=await o.methods.getCandidateVoteCount(e).call({from:t});return n},T=async t=>{let e=await o.methods.getTotalVoteCount().call({from:t});return e},g=async t=>{let e=await o.methods.getIsAdmin(t).call();return e},b=async t=>{let e=await o.methods.getTokenId(t).call();return console.log(e),e},h=async()=>{let t=await o.methods.getNFTTokenCA().call();return console.log(t),t},w=async()=>{let t=await o.methods.getElectionStatus().call();return t};async function v(t,e){if(""==t)return{status:"fail",message:"\uD83D\uDCA1 Connect your Metamask wallet to vote on the blockchain."};try{let n=await window.ethereum.request({method:"eth_sendTransaction",params:[{to:u,from:t,data:e}]});return{status:"success",message:n}}catch(a){return{status:"fail",message:"\uD83D\uDE25 "+a.message}}}},89214:function(){},85568:function(){},52361:function(){},94616:function(){}},function(t){t.O(0,[8543,8764,33,2520,4027,9774,2888,179],function(){return t(t.s=96099)}),_N_E=t.O()}]);